<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 The Layered Grammar of Graphics | Graphic Design with ggplot2</title>
  <meta name="description" content="Create Beautiful and Engaging Data Visualizations in R" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 The Layered Grammar of Graphics | Graphic Design with ggplot2" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Create Beautiful and Engaging Data Visualizations in R" />
  <meta name="github-repo" content="z3tt/graphic-design-ggplot2" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 The Layered Grammar of Graphics | Graphic Design with ggplot2" />
  
  <meta name="twitter:description" content="Create Beautiful and Engaging Data Visualizations in R" />
  

<meta name="author" content="Cédric Scherer" />


<meta name="date" content="2023-02-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="get-started.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<script src="libs/kePrint/kePrint.js"></script>
<link href="libs/lightable/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>“Graphic Design with ggplot2”</b><br>Written by Cédric Scherer</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-read-this-book"><i class="fa fa-check"></i>Why Read This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i>How to Read This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software Information and Conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#communication"><i class="fa fa-check"></i><b>1.1</b> Communicating Data</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#coding"><i class="fa fa-check"></i><b>1.2</b> Coding Visualizations</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#why"><i class="fa fa-check"></i><b>1.3</b> Why R and <strong>ggplot2</strong></a></li>
</ul></li>
<li class="part"><span><b>I General Overiew</b></span></li>
<li class="chapter" data-level="2" data-path="grammar.html"><a href="grammar.html"><i class="fa fa-check"></i><b>2</b> The Layered Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="grammar.html"><a href="grammar.html#ggplot"><i class="fa fa-check"></i><b>2.1</b> The ggplot2 Package</a></li>
<li class="chapter" data-level="2.2" data-path="grammar.html"><a href="grammar.html#components"><i class="fa fa-check"></i><b>2.2</b> The Components of a ggplot</a></li>
<li class="chapter" data-level="2.3" data-path="grammar.html"><a href="grammar.html#key-components"><i class="fa fa-check"></i><b>2.3</b> Key Components</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="grammar.html"><a href="grammar.html#data"><i class="fa fa-check"></i><b>2.3.1</b> Data</a></li>
<li class="chapter" data-level="2.3.2" data-path="grammar.html"><a href="grammar.html#aesthetics"><i class="fa fa-check"></i><b>2.3.2</b> Aesthetics</a></li>
<li class="chapter" data-level="2.3.3" data-path="grammar.html"><a href="grammar.html#layers"><i class="fa fa-check"></i><b>2.3.3</b> Layers</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="grammar.html"><a href="grammar.html#additional-components"><i class="fa fa-check"></i><b>2.4</b> Additional Components</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="grammar.html"><a href="grammar.html#scales"><i class="fa fa-check"></i><b>2.4.1</b> Scales</a></li>
<li class="chapter" data-level="2.4.2" data-path="grammar.html"><a href="grammar.html#coords"><i class="fa fa-check"></i><b>2.4.2</b> Coordinate Systems</a></li>
<li class="chapter" data-level="2.4.3" data-path="grammar.html"><a href="grammar.html#facets"><i class="fa fa-check"></i><b>2.4.3</b> Facets</a></li>
<li class="chapter" data-level="2.4.4" data-path="grammar.html"><a href="grammar.html#themes"><i class="fa fa-check"></i><b>2.4.4</b> Themes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="grammar.html"><a href="grammar.html#showcase"><i class="fa fa-check"></i><b>2.5</b> Showcase</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="get-started.html"><a href="get-started.html"><i class="fa fa-check"></i><b>3</b> Get Started</a>
<ul>
<li class="chapter" data-level="3.1" data-path="get-started.html"><a href="get-started.html#dataset"><i class="fa fa-check"></i><b>3.1</b> The Data Set</a></li>
<li class="chapter" data-level="3.2" data-path="get-started.html"><a href="get-started.html#rstats"><i class="fa fa-check"></i><b>3.2</b> Working in R</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="get-started.html"><a href="get-started.html#import"><i class="fa fa-check"></i><b>3.2.1</b> Import Data</a></li>
<li class="chapter" data-level="3.2.2" data-path="get-started.html"><a href="get-started.html#workflows"><i class="fa fa-check"></i><b>3.2.2</b> Project-Oriented Workflows</a></li>
<li class="chapter" data-level="3.2.3" data-path="get-started.html"><a href="get-started.html#inspect"><i class="fa fa-check"></i><b>3.2.3</b> Inspect the Data</a></li>
<li class="chapter" data-level="3.2.4" data-path="get-started.html"><a href="get-started.html#classes"><i class="fa fa-check"></i><b>3.2.4</b> Data Types</a></li>
<li class="chapter" data-level="3.2.5" data-path="get-started.html"><a href="get-started.html#preparation"><i class="fa fa-check"></i><b>3.2.5</b> Data Preparation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="walkthrough.html"><a href="walkthrough.html"><i class="fa fa-check"></i><b>4</b> A Walk-Through Example</a>
<ul>
<li class="chapter" data-level="4.1" data-path="walkthrough.html"><a href="walkthrough.html#prep-ggplot"><i class="fa fa-check"></i><b>4.1</b> Prerequisites</a></li>
<li class="chapter" data-level="4.2" data-path="walkthrough.html"><a href="walkthrough.html#basics"><i class="fa fa-check"></i><b>4.2</b> Create a Basic ggplot</a></li>
<li class="chapter" data-level="4.3" data-path="walkthrough.html"><a href="walkthrough.html#combined-layers"><i class="fa fa-check"></i><b>4.3</b> Combine Multiple Layers</a></li>
<li class="chapter" data-level="4.4" data-path="walkthrough.html"><a href="walkthrough.html#map-aesthetics"><i class="fa fa-check"></i><b>4.4</b> Mapping Aesthetics</a></li>
<li class="chapter" data-level="4.5" data-path="walkthrough.html"><a href="walkthrough.html#set-properties"><i class="fa fa-check"></i><b>4.5</b> Setting Properties</a></li>
<li class="chapter" data-level="4.6" data-path="walkthrough.html"><a href="walkthrough.html#faceting"><i class="fa fa-check"></i><b>4.6</b> Create Small Multiples</a></li>
<li class="chapter" data-level="4.7" data-path="walkthrough.html"><a href="walkthrough.html#axis-scaling"><i class="fa fa-check"></i><b>4.7</b> Change the Axis Scaling</a></li>
<li class="chapter" data-level="4.8" data-path="walkthrough.html"><a href="walkthrough.html#color-scaling"><i class="fa fa-check"></i><b>4.8</b> Use a Custom Color Palette</a></li>
<li class="chapter" data-level="4.9" data-path="walkthrough.html"><a href="walkthrough.html#label-adjustment"><i class="fa fa-check"></i><b>4.9</b> Adjust Labels and Titles</a></li>
<li class="chapter" data-level="4.10" data-path="walkthrough.html"><a href="walkthrough.html#complete-themes"><i class="fa fa-check"></i><b>4.10</b> Apply a Complete Theme</a></li>
<li class="chapter" data-level="4.11" data-path="walkthrough.html"><a href="walkthrough.html#custom-theming"><i class="fa fa-check"></i><b>4.11</b> Customize the Theme</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tips-to-improve-your-ggplot-design.html"><a href="tips-to-improve-your-ggplot-design.html"><i class="fa fa-check"></i><b>5</b> Tips to Improve Your ggplot Design</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tips-to-improve-your-ggplot-design.html"><a href="tips-to-improve-your-ggplot-design.html#use-a-different-theme"><i class="fa fa-check"></i><b>5.1</b> Use a Different Theme</a></li>
<li class="chapter" data-level="5.2" data-path="tips-to-improve-your-ggplot-design.html"><a href="tips-to-improve-your-ggplot-design.html#use-a-custom-font"><i class="fa fa-check"></i><b>5.2</b> Use a Custom Font</a></li>
<li class="chapter" data-level="5.3" data-path="tips-to-improve-your-ggplot-design.html"><a href="tips-to-improve-your-ggplot-design.html#increase-the-font-sizes"><i class="fa fa-check"></i><b>5.3</b> Increase the Font Sizes</a></li>
<li class="chapter" data-level="5.4" data-path="tips-to-improve-your-ggplot-design.html"><a href="tips-to-improve-your-ggplot-design.html#create-text-hierarchy"><i class="fa fa-check"></i><b>5.4</b> Create Text Hierarchy</a></li>
<li class="chapter" data-level="5.5" data-path="tips-to-improve-your-ggplot-design.html"><a href="tips-to-improve-your-ggplot-design.html#modify-the-legend"><i class="fa fa-check"></i><b>5.5</b> Modify the Legend</a></li>
<li class="chapter" data-level="5.6" data-path="tips-to-improve-your-ggplot-design.html"><a href="tips-to-improve-your-ggplot-design.html#align-titles-and-captions"><i class="fa fa-check"></i><b>5.6</b> Align Titles and Captions</a></li>
<li class="chapter" data-level="5.7" data-path="tips-to-improve-your-ggplot-design.html"><a href="tips-to-improve-your-ggplot-design.html#add-some-white-space"><i class="fa fa-check"></i><b>5.7</b> Add Some White Space</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tips-to-improve-your-ggplot-workflow.html"><a href="tips-to-improve-your-ggplot-workflow.html"><i class="fa fa-check"></i><b>6</b> Tips to Improve Your ggplot Workflow</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tips-to-improve-your-ggplot-workflow.html"><a href="tips-to-improve-your-ggplot-workflow.html#save-ggplot-output-with-the-correct-dimensions"><i class="fa fa-check"></i><b>6.1</b> Save ggplot Output with the “Correct” Dimensions</a></li>
<li class="chapter" data-level="6.2" data-path="tips-to-improve-your-ggplot-workflow.html"><a href="tips-to-improve-your-ggplot-workflow.html#display-ggplot-output-with-the-correct-dimensions"><i class="fa fa-check"></i><b>6.2</b> Display ggplot Output with the “Correct” Dimensions</a></li>
<li class="chapter" data-level="6.3" data-path="tips-to-improve-your-ggplot-workflow.html"><a href="tips-to-improve-your-ggplot-workflow.html#make-fonts-work"><i class="fa fa-check"></i><b>6.3</b> Make Fonts Work</a></li>
<li class="chapter" data-level="6.4" data-path="tips-to-improve-your-ggplot-workflow.html"><a href="tips-to-improve-your-ggplot-workflow.html#set-your-ggplot-theme-globally"><i class="fa fa-check"></i><b>6.4</b> Set Your ggplot Theme Globally</a></li>
<li class="chapter" data-level="6.5" data-path="tips-to-improve-your-ggplot-workflow.html"><a href="tips-to-improve-your-ggplot-workflow.html#create-your-own-theme"><i class="fa fa-check"></i><b>6.5</b> Create Your Own Theme</a></li>
</ul></li>
<li class="part"><span><b>II How To Work with Components</b></span></li>
<li class="chapter" data-level="7" data-path="working-with-layers.html"><a href="working-with-layers.html"><i class="fa fa-check"></i><b>7</b> Working with Layers</a>
<ul>
<li class="chapter" data-level="7.1" data-path="working-with-layers.html"><a href="working-with-layers.html#geometrical-shapes"><i class="fa fa-check"></i><b>7.1</b> Geometrical Shapes</a></li>
<li class="chapter" data-level="7.2" data-path="working-with-layers.html"><a href="working-with-layers.html#statistical-transformations"><i class="fa fa-check"></i><b>7.2</b> Statistical Transformations</a></li>
<li class="chapter" data-level="7.3" data-path="working-with-layers.html"><a href="working-with-layers.html#positional-adjustments"><i class="fa fa-check"></i><b>7.3</b> Positional Adjustments</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="working-with-colors.html"><a href="working-with-colors.html"><i class="fa fa-check"></i><b>8</b> Working with Colors</a></li>
<li class="chapter" data-level="9" data-path="working-with-text.html"><a href="working-with-text.html"><i class="fa fa-check"></i><b>9</b> Working with Text</a></li>
<li class="part"><span><b>III Advanced Walk-Through Examples</b></span></li>
<li class="chapter" data-level="10" data-path="advanced-examples.html"><a href="advanced-examples.html"><i class="fa fa-check"></i><b>10</b> Overview</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="more-to-say.html"><a href="more-to-say.html"><i class="fa fa-check"></i><b>A</b> More to Say</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<hr class="grey"><li><i><a href="https://bookdown.org" target="blank">Published with bookdown</a></i></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Graphic Design with ggplot2</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="grammar" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> The Layered Grammar of Graphics<a href="grammar.html#grammar" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="ggplot" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> The ggplot2 Package<a href="grammar.html#ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In 2005 Hadley Wickham implemented Leland Wilkinson’s <a href="https://link.springer.com/chapter/10.1007/978-3-642-21551-3_13">“The Grammar of Graphics”</a> <span class="citation">(<a href="#ref-wilkinson2005" role="doc-biblioref">Wilkinson 2005</a>)</span>—a general concept for data visualization—as an R package called <a href="https://ggplot2.tidyverse.org/"><strong>ggplot2</strong></a> <span class="citation">(<a href="#ref-ggplot2" role="doc-biblioref">Wickham 2016</a>)</span>. The idea of both, the theoretical concept and its implementation in <strong>ggplot2</strong>, is that data visualizations can be defined as semantic components rather than as predefined chart types. The ability to control and combine multiple components makes it a powerful approach to compose complex graphs, iterate quickly over different visual data representations, and modify existing plots. Furthermore, it allows for a comprehensive and consistent syntax to describe and build data visualizations.</p>
<p>The package was intially released on June 10, 2007 and has since then become one of the most popular R packages and the standard for producing custom, high-quality graphics in R. The predessor, the original <a href="https://github.com/hadley/ggplot1"><strong>ggplot</strong> package</a>, was released in 2006 and is made available out of historical interest.</p>
<p>When looking into the package description of the <a href="https://ggplot2.tidyverse.org/"><strong>ggplot2</strong> package</a>, it states the following:</p>
<blockquote>
<p><strong>ggplot2</strong> is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell <strong>ggplot2</strong> how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.</p>
</blockquote>
<p>The most important insight from this technical description is that</p>
<ol style="list-style-type: decimal">
<li><strong><em>we map variables to aesthetics</em></strong>, i.e. defining the visual channels used to represent the variables (e.g. position, color, shape)</li>
<li><strong><em>we use graphical primitives</em></strong>, i.e. definining one or multiple forms to represent the variables (e.g. lines, points, rectangles)</li>
</ol>
<p>Both are important when writing <strong>ggplot2</strong> code and together with the provided data they are the key components of a ggplot. Additional components allow to control the visual appearance, the layout, and the coordinate system.</p>
</div>
<div id="components" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> The Components of a ggplot<a href="grammar.html#components" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In general, a ggplot is built up from the following components:</p>
<ol style="list-style-type: decimal">
<li><strong><em>Data</em></strong>:<br />
The raw data that you want to plot.</li>
<li><strong><em>Aesthetics</em></strong>:<br />
The mapping of variables to visual properties, such as position, color, size, shape, and transparency.</li>
<li><strong><em>Layers:</em></strong><br />
The representation of the data on the plot panel which is a combination of the <em>geometric shapes</em> representing the data and the <em>statistical transformation</em> of the data, such as fitted curves, counts, and data summaries.</li>
<li><strong><em>Scales</em></strong>:<br />
The control of the mapping between the data and the aesthetic dimensions, such as data range to positional aesthetics or qualitative or quantitative values to colors.</li>
<li><strong><em>Coordinate system</em></strong>:<br />
The transformation used for mapping data coordinates into the plane of the graphic.</li>
<li><strong><em>Facets</em></strong>:<br />
The arrangement of the data into a grid of plots (also known as <em>trellis</em> or <em>lattice plot</em>, or simply <em>small multiples</em>).</li>
<li><strong><em>Visual themes</em></strong>:<br />
The overall visual (non-data) details of a plot, such as background, grid lines, axes, typefaces, sizes, and colors.</li>
</ol>
<p class="note">
<p>The number of elements may vary depending on how you group them and whom you ask. This list is based on the list provided in the <a href="https://ggplot2-book.org/introduction.html">“ggplot2” book by Hadley Wickham</a> <span class="citation">(<a href="#ref-ggplot2" role="doc-biblioref">Wickham 2016</a>)</span>.</p>
</p>
<p>A basic ggplot needs three key components that you have to specify: the <em>data</em>, <em>aesthetics</em>, and a <em>layer</em>. All other additional components can be further modified to customize your graphic.</p>
<p>You can think of a ggplot as a receipt for a dish: it can be based on a few or a diversity of ingredients. Also, you are free to add additional ingredients to spice-up your creation (literally and visually).</p>
<p>Similarly, you can build rather basic charts such as scatter plots or histograms with only a few lines code. But <strong>ggplot2</strong> also allows to create rather complex charts that combine multiple geometries, statistical transformations and maybe even data sets. On top, it is up to you how much effort you take to polish the plot. You can rely on the defaults used for data-related aesthetics (e.g. default axis breaks and color palettes) and non-data aspects (e.g. complete themes). Or you decide to modify the data-related aesthetics such as axes and color palettes and/or customize the theme elements of your graphic to your needs.</p>
</div>
<div id="key-components" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Key Components<a href="grammar.html#key-components" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="data" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Data<a href="grammar.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Without data, there is no data visualization. Luckily, there are many sources of data available to us: statistics, surveys, experiments, and observations. The data may be collected by governments, researcher labs and organisations, companies—or yourself. However, it is important to consider the quality and context of the data you choose in order to gain accurate and valuable insights.</p>
<p>The <strong><em>quality</em></strong> of the data we use will have a direct impact on the validity and usefulness of the insights we gain from our data visualization. Poor quality data can lead to incorrect conclusions, while high quality data can provide valuable insights and help us make informed decisions.</p>
<p>In addition to the quality of the data, it is also important to consider the <strong><em>context</em></strong> in which the data was collected. Different data sources may have different biases or limitations, and it is important to consider these when interpreting and visualizing the data.</p>
<p>Usually, data visualization should be based on real data. At the same time, it is of course possible to create visualizations using hypothetical or simulated data to train yourself or experiment with new chart types. However, you should always keep in mind the origin of the data and communicate the fact clearly to your audience to avoid misleading insights. In order to truly understand and learn from data, we need to work with real, accurate, and reliable data.</p>
<p>Depending on how you want to display your data in <strong>ggplot2</strong>, you have to prepare the data in different formats. The general recommendation is to use a “long format” or “tidy format”. In a tidy-form data set, each variable is stored in a column while rows form single observations (<a href="grammar.html#fig:02imgFormatLongTidyWide">2.1</a>). With such a data set, we can display each variable using a different visual channel, the <em>aesthetics</em>, such as position, color and shape (see <a href="grammar.html#fig:02ggplotAestheticsData">2.2</a> A). Consequently, data in true “long format” (i.e. the variable is specified in a dedicated row) is only useful in case you want to display the variables using the same visual channel (see <a href="grammar.html#fig:02ggplotAestheticsData">2.2</a> B). A wide format, as you might often find it in case of governmental data, often needs some reshaping except the goal is the representation of a single combination.</p>
<div class="figure"><span style="display:block;" id="fig:02imgFormatLongTidyWide"></span>
<img src="img/table-format-long-tidy-wide.png" alt="A comparison of data arranged in a long (left) versus wide formats (right). The two different metrics by color. Groups are additionally encoded by shaded rows."  />
<p class="caption">
FIGURE 2.1: A comparison of data arranged in a long (left) versus wide formats (right). The two different metrics by color. Groups are additionally encoded by shaded rows.
</p>
</div>
<p>If you need to reshape your data, the <code>pivot_*()</code> functions from the <strong>tidyr</strong> package are handy. Use <code>pivot_longer()</code> to convert a wide data set into the long or tidy format. To go the other direction, use the <code>pivot_wider()</code>. You can find an example in chapter <a href="get-started.html#tidyr">3.2.5.2</a>.</p>
</div>
<div id="aesthetics" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Aesthetics<a href="grammar.html#aesthetics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To visualize certain variables in your data set with <strong>ggplot2</strong>, values are mapped to visual channels called <em>aesthetics</em>. Aesthetic attributes include positional information such as x and y but also colors, fills, point shapes, line types, sizes, and levels of transparency.</p>
<p>Sticking to our small data set, we could use our tidy-form data (<a href="grammar.html#fig:02imgFormatLongTidyWide">2.1</a>, top right) to create a scatter plot of the two metrics (<a href="grammar.html#fig:02ggplotAestheticsData">2.2</a> A). However, we could also use the long-form data (<a href="grammar.html#fig:02imgFormatLongTidyWide">2.1</a>, top left) to show the metrics as a group wise dot plot and encode the metrics by shape(<a href="grammar.html#fig:02ggplotAestheticsData">2.2</a> B).</p>
<div class="figure"><span style="display:block;" id="fig:02ggplotAestheticsData"></span>
<img src="bookdown_files/figure-html/02ggplotAestheticsData-1.png" alt="Basic ggplot outputs mapping four different variables (columns of the data set) to aesthetics, using the long-format data (`data_long`, left plot) and wide-format data (`data_wide`, right plot). Lines connecting the groups were added to make the difference between both plots more obvious." width="864" />
<p class="caption">
FIGURE 2.2: Basic ggplot outputs mapping four different variables (columns of the data set) to aesthetics, using the long-format data (<code>data_long</code>, left plot) and wide-format data (<code>data_wide</code>, right plot). Lines connecting the groups were added to make the difference between both plots more obvious.
</p>
</div>
<p class="note">
The optimal shape of your data set relates to the plot you have in mind. Stick to the rule that any variable that you want to use for an aesthetic should have a dedicated column.
</p>
</div>
<div id="layers" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Layers<a href="grammar.html#layers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Layers in <strong>ggplot2</strong> define the the statistical transformation, geometrical representation, and positional adjustment of the mapped values. In the example above, we have used a layer with geometry “point” and without any statistical transformation or positional adjustment. This specification simply means “draw the raw values as points by using the specified aesthetics of position, color, and shape”.</p>
<p>Statistical transformation are responsible for calculating summaries such as counts and averages. You can also perform more advanced transformations of the data such as calculating smoothings and densities. If there is any statistical transformation specified, the calculation is applied to the data before they are plotted.</p>
<p>The raw or transformed data are then used to draw the specified geometrical object(s), representing the parsed data e.g. as points, bars, or lines. On top, you can also adjust the position of the geometries. Examples for positional adjustments are the grouping or stacking of bars or the jittering of points.</p>
<p>For example, you might use a statistical transformation to calculate linear regression lines to fit them to your variables mapped to x and y and display them as banded lines (geometrical object). Or you might decide to show the raw data as points without any statistical transformation (<a href="grammar.html#fig:02ggplotLayersGeomsStats">2.3</a>).</p>
<div class="figure"><span style="display:block;" id="fig:02ggplotLayersGeomsStats"></span>
<img src="bookdown_files/figure-html/02ggplotLayersGeomsStats-1.png" alt="The same data, visualized as  a scatter plot showing the raw data without any statistical transformation (left) and after a statistical tranformation has been applied to calculate linear fittings for each Penguin species (right). The visualizations use the Palmer Archipelago penguin data by A.M. Horst, A.P. Hill &amp; K.B. Gorman (2020)." width="864" />
<p class="caption">
FIGURE 2.3: The same data, visualized as a scatter plot showing the raw data without any statistical transformation (left) and after a statistical tranformation has been applied to calculate linear fittings for each Penguin species (right). The visualizations use the Palmer Archipelago penguin data by A.M. Horst, A.P. Hill &amp; K.B. Gorman (2020).
</p>
</div>
<p>In general, each layer in a ggplot is created using a separate function call. For each layer, you can specify the visual appearance, such as color, and size, independently by <em>setting properties</em> (e.g. turn all points green) or <em>mapping aesthetics</em> (e.g. base the color on the group variable). This allows you to build up a complex plot by adding and customizing individual layers, giving you fine-grained control over the appearance of your plots.</p>
<div class="figure"><span style="display:block;" id="fig:02ggplotLayersCombinedPenguins"></span>
<img src="bookdown_files/figure-html/02ggplotLayersCombinedPenguins-1.png" alt="Three different visualizations showing the distribution of body mass across three penguin species. A) A box-and-whiskers plot using a single layer. B) Adding a second layer to plot A allows to show the raw data as jittered points. C) By combining multiple layers, one can build more complex visualizations like this variant of a raincloud plot. Four layers are used here: one for the density curve, one for the pointrange, another one for the barcode strip and finally one for the annotation with the mean values. The visualizations use the Palmer Archipelago penguin data by A.M. Horst, A.P. Hill &amp; K.B. Gorman (2020)." width="864" />
<p class="caption">
FIGURE 2.4: Three different visualizations showing the distribution of body mass across three penguin species. A) A box-and-whiskers plot using a single layer. B) Adding a second layer to plot A allows to show the raw data as jittered points. C) By combining multiple layers, one can build more complex visualizations like this variant of a raincloud plot. Four layers are used here: one for the density curve, one for the pointrange, another one for the barcode strip and finally one for the annotation with the mean values. The visualizations use the Palmer Archipelago penguin data by A.M. Horst, A.P. Hill &amp; K.B. Gorman (2020).
</p>
</div>
<p>The layered approach allows to create a wide range of charts and graphics. One can also create more complex, potentially unusual graphics as it allows you to combine layers in a traditional but also nontraditional way as you like.</p>
</div>
</div>
<div id="additional-components" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Additional Components<a href="grammar.html#additional-components" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following components are set by default but can be tweaked to:</p>
<ul>
<li>adjust the properties of the aesthetics (scales)</li>
<li>control the mapping of positional aesthetics (coordinate systems)</li>
<li>create small multiples of the specified chart (facets)</li>
<li>modify non-data related elements (themes)</li>
</ul>
<div id="scales" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Scales<a href="grammar.html#scales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scales translate between the value range of our data, mapped to aesthetics, and the perceptual property range. Every time you map a column to an aesthetic, a respective suitable scale component is added to your plot.</p>
<p>To modify the default settings you can specify your own scale, for example tweak the number of axis ticks or customize the colors used to encode groups. Furthermore, scales are also used to transform the data before it is processed by the layer. An example of transforming the values with a scale component is the display of the data in discrete bins.</p>
</div>
<div id="coords" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Coordinate Systems<a href="grammar.html#coords" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Coordinate systems interpret the position aesthetics. By default, a Cartesian coordinate system is used to encode the x and y aesthetics. As this is likely the most common type in data visualization, you might modify coordinate systems only in two cases: creating circular plots such as pie charts and circular barplots or when projecting spatial data.</p>
</div>
<div id="facets" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Facets<a href="grammar.html#facets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Facets split variables to multiple panels, allowing to create the same visualization for several combinations. Such small multiples can be a powerful tool to show high-dimensional data, to explore big data sets, and to compare patterns across variables and groups.</p>
<p>A special case of facets are geo-referenced small multiples: a set of visualizations is laid out in a grid that represents the original topography. Such graphics can be easily created in <strong>ggplot2</strong> with the help of the <strong>geofacet</strong> extension package.</p>
</div>
<div id="themes" class="section level3 hasAnchor" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Themes<a href="grammar.html#themes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Themes encode all non-data elements of your plots such as the typeface, background colors, and titles and captions. <strong>ggplot2</strong> comes with a set of complete themes that can be added to your plot and further modified with high flexibility.</p>
<p>The modified themes can easily be turned into your own custom theme function which can be used as a component in the same way. Also, several extension packages such as <strong>ggthemes</strong>, <strong>hrbrthemes</strong> or <strong>tvthemes</strong> provide even more complete themes to change the look of your visualization.</p>
<p>The ability to use pre-coded themes is a great feature as it allows for a consistent and corporate style while saving time to write the same code over and over again.</p>
</div>
</div>
<div id="showcase" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Showcase<a href="grammar.html#showcase" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following collection of graphics illustrate the power and versatility of <strong>ggplot2</strong>—and a range of extension packages—to create customized, partly uncommon or complex charts. All these charts are the outcome of 100% R code, making use of multiple layers and customized colors, fonts, and themes.</p>
<p>The visualization “Artists in the USA” shows the…[WIP]</p>
<div class="figure"><span style="display:block;" id="fig:02imgVizArtistsUSA"></span>
<img src="img/artists-tt202239-lee-olney.png" alt="&quot;Artists in the USA&quot; by Lee Olney"  />
<p class="caption">
FIGURE 2.5: “Artists in the USA” by Lee Olney
</p>
</div>
<p>In the “Not my Cup of Coffee” visualization, I combined seven layers to create an overview of coffee bean ratings by the Coffee Quality Institute per country. Two layers, a dot plot and an interval strip, are used to highlight the distribution. Two different triangles highlight minimum (red and empty) and median (black and filled) scores. Text layers indicate the scores next to the triangles as well as the respective country at the begin of each interval. [WIP]</p>
<div class="figure"><span style="display:block;" id="fig:02imgVizCoffeeRatings"></span>
<img src="img/coffee-ratings.png" alt="&quot;Not my Cup of Coffee&quot; by Cédric Scherer"  />
<p class="caption">
FIGURE 2.6: “Not my Cup of Coffee” by Cédric Scherer
</p>
</div>
<p>Tanya Shapiro used a “jitter-pop” chart—a cmbination of jitter strips and lollipops—to visualize several average IMDb scores of the TV series “Doctor Who”. Small jittered points show the average scores for each season, colored by doctor. The large circular images show visualize the average score per doctor with horizontal lines indicating the deviation from the overall average score (vertical line). This graphic combines five different layers: jittered points, images, text annotations, and horizontal and vertical lines. the package makes use of the extension packages … [WIP]</p>
<div class="figure"><span style="display:block;" id="fig:02imgVizDoctorWho"></span>
<img src="img/doctor-who-tanya-shapiro.png" alt="&quot;Doctor Who was the Best?&quot; by Tanya Shapiro"  />
<p class="caption">
FIGURE 2.7: “Doctor Who was the Best?” by Tanya Shapiro
</p>
</div>
<p>These are just a few examples of the many types of charts that you can create using <strong>ggplot2</strong>. With a little creativity and experimentation, you can come up with your own unique and informative visualizations or artful pieces.</p>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-ggplot2" class="csl-entry">
Wickham, Hadley. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-wilkinson2005" class="csl-entry">
Wilkinson, Leland. 2005. <em>The Grammar of Graphics</em>. 2nd ed. Berlin/Heidelberg, Germany: Springer Science+Business Media.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="get-started.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yihui/bookdown-crc/edit/master/02-ggplot2-package.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown.pdf", "bookdown.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
